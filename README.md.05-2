#devops-netology
# 05-virt-02-control-systems
# Задача 1
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

* 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий
* Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин
* Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры
* Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux  
**Ответ:**
* _100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий_  
Можно реализовать, например, с помощью продуктов VMWare. Поддерживается широкий спектр как Windows так и Linux систем. Продукция вендора рассчитана на корпоративный сегмент, порядка 100 серверов - вполне подходящий вариант. VMWare Vsphere - в том числе ESXi можно использовать для виртуальных серверов, vCenter для централизованного управления. В том числе, возможность реализации системы резервного копирования на базе снапшотов (snapshot). Есть инструменты клонирования виртуальных серверов, что позволит упростить масштабирование при необходимости развертывания множества похожих серверов.   
* _Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин_  
В случае с бесплатным вариантом нужно смотреть в сторону решений XEN или KVM. Имеет смысл выбрать KVM, так как он считается более совместимым с Windows вариантом, и одновременно при этом является нативным решением для linux систем. Думаю, не стоит использовать системы разных вендоров, т.к. количество серверов невелико, и управлять будет проще при помощи однотипных инструментов.
* _Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры_  
В случае с Windows инфраструктурой наилучшим решением считается Microsoft Hyper-v. Продукт встроен в Windows Server, тесно интегрирован со средой Windows и позволяет получить максимальную совместимость и производительность. Но нужно учесть, что Microsoft имеет довольно замысловатую систему лицензирования, и зависит от того, какие лицензии на продукты уже имеются в наличии. В случае с существенным количеством пользователей решение будет далеко не бесплатным, и имеет смысл посмотреть в сторону других вендоров, например, тот же KVM.
* _Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux_  
В этом случае, в зависимости от конкретных задач можно использовать решения VMWare, VirtualBox. Решение типа Docker в данном случае не подойдет, так как завязано на одном ядре, а в задаче речь идет о разных дистрибутивах Linux

# Задача 2
Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.  
**Ответ:**  
В целом, процедура сводится к конвертированию образа диска, содержащего виртуальную систему. Существуют конверторы виртуальных дисков, как пример, утилита StarWind V2V Converter. Можно использовать конвертор форматов из состава VirtualBox. Необходимо преобразовать сохраненный образ системы из формата VMWare (VMDK) в формат HyperV(VHDX) после чего путь к сконвертированному файлу можно будет указать в настройках вновь созданной виртуальной машины для загрузки с него. Перед процедурой из гостевой системы желательно удалить инструменты интеграции VMWare tools.  
Также существует решение Microsoft System Center Virtual Machine Manager предлагает мастер (визард) для простой конвертации виртуальных серверов из формата VMware Hyper-V в несколько кликов в графическом интерфейсе.  

# Задача 3
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.  
**Ответ:**  
Возможные проблемы и недостатки такие:

* Слабая совместимость решений различных вендоров, сложности автоматизации процессов; 
* Возможные затраты на обучение и переобучение сотрудников для работы с различными инструментами, необходимость иметь больше администраторов в штате;
* Сложности управления - для разнородных систем понадобятся разные инструменты управления, мониторинга, резервного копирования.  
 
В случае, когда разные части инфраструктуры не предполагают тесной интеграции, вполне допустимо по каким-либо причинам (например, историческим или финансовым) использовать системы разных вендоров. Например, в рамках одной организации кластерные почтовые серверы Microsoft Exchange в Windows среде (Hyper-v) могут вполне нормально соседстовать с веб-сервером на apache, системой корпоративного мессенджера, proxy-сервером на squid - все под управлением linux-виртуалок на VMWare. Как правило, выбор основывается на первоначальном наборе инструментов и инфраструктуре, а также ниличии финансовых ресурсов и желании/возможности/целесообразности. 
